on:
  push:
    branches:
      - main
name: Deploy website on push
jobs:
  web-deploy:
    name: Deploy
    runs-on: ubuntu-latest
    steps:
      - name: Get latest code
        uses: actions/checkout@v3

      - name: Install lftp
        run: sudo apt-get update && sudo apt-get install -y lftp

      - name: Push files using lftp
        run: |
          lftp -e "
          open -u ${{ secrets.ftp_user }},${{ secrets.ftp_password }} myhosting.ua.pt;
          mirror --reverse --verbose --delete --exclude-glob .git/ --exclude-glob .github/ --exclude .gitignore ./ /Hosting/ieee.web.ua.pt/;
          bye
          "
